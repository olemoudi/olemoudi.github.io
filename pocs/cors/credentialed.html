<html>
    <head>
        CORS Credentialed Test
    </head>
    <script>
        document.cookie = "auth=supersicrit";
    </script>
    <body>

        function send() {

            var url = "https://makensi.es/credentialed.html";

            var data = {};
            data.firstname = "John2";
            data.lastname  = "Snow2";
            var json = JSON.stringify(data);

            var xhr = new XMLHttpRequest();
            xhr.open("PUT", url+'?PUT', true);
            xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
            xhr.withCredentials();
            xhr.onload = function () {
                var users = JSON.parse(xhr.responseText);
                if (xhr.readyState == 4 && xhr.status == "200") {
                    console.log("success");
                } else {
                    console.log("error");
                }
            }
            xhr.send(json);        
        }

        <button  type="button" onclick="send()">SEND XHR</button>
        
    </body>
</html>
