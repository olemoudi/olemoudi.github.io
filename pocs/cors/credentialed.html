<html>
    <head>
        <h1>CORS Credentialed Test</h1>
    </head>
    <script>
        document.cookie = "auth=supersicrit";
        function send() {

            var url = "https://makensi.es/pocs/cors/credentialed.html";

            var data = {};
            data.firstname = "John2";
            data.lastname  = "Snow2";
            var json = JSON.stringify(data);

            var xhr = new XMLHttpRequest();
            xhr.open("PUT", url+'?PUT', true);
            xhr.setRequestHeader('Content-type','application/json; charset=utf-8');
            xhr.withCredentials = true;
            xhr.onload = function () {
                var users = JSON.parse(xhr.responseText);
                if (xhr.readyState == 4 && xhr.status == "200") {
                    console.log("success");
                } else {
                    console.log("error");
                }
            }
            xhr.send(json);        
        }
    </script>
    <body>

        <button  type="button" onclick="send()">SEND XHR</button>
        
    </body>
</html>
